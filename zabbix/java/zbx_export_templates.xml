<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.0</version>
    <date>2021-11-06T03:57:14Z</date>
    <groups>
        <group>
            <name>Templates/Applications</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template App Generic Java Script</template>
            <name>Template App Generic Java Script</name>
            <description>通过jps自动发现java应用，通过jstat获取关键指标</description>
            <groups>
                <group>
                    <name>Templates/Applications</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>JVM</name>
                </application>
            </applications>
            <discovery_rules>
                <discovery_rule>
                    <name>java.discovery</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>java.discovery</key>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#PROGRAM_NAME}</macro>
                                <formulaid>B</formulaid>
                            </condition>
                            <condition>
                                <macro>{#PID_NUMBER}</macro>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <lifetime>7d</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#PROGRAM_NAME}  {#PID_NUMBER} status</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;all&quot;]</key>
                            <description>获取所有jvm指标</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(#2)}=1 and {diff()}=1</expression>
                                    <name>JVM is not available {#PROGRAM_NAME} {#PID_NUMBER}</name>
                                    <priority>HIGH</priority>
                                    <description>JVM指标获取失败</description>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Current eden space capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;EC&quot;]</key>
                            <units>B</units>
                            <description>当前Eden区容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Eden space utilization {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;EU&quot;]</key>
                            <units>B</units>
                            <description>当前Eden区使用量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Number of full GC events {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;FGC&quot;]</key>
                            <description>老年代GC次数</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>SIMPLE_CHANGE</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{sum(15m)}&gt;1</expression>
                                    <name>FGC happens in 15 minutes. {#PROGRAM_NAME} {#PID_NUMBER}</name>
                                    <priority>AVERAGE</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Metaspace capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;MC&quot;]</key>
                            <units>B</units>
                            <description>当前元数据容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Minimum metaspace capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;MCMN&quot;]</key>
                            <units>KB</units>
                            <description>元数据最小容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Maximum metaspace capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;MCMX&quot;]</key>
                            <units>B</units>
                            <description>元数据最大容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Metacspace utilization {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;MU&quot;]</key>
                            <units>B</units>
                            <description>当前元数据使用量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Current new generation capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;NGC&quot;]</key>
                            <units>B</units>
                            <description>当前新生代容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Minimum new generation capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;NGCMN&quot;]</key>
                            <units>B</units>
                            <description>新生代最小容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Maximum new generation capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;NGCMX&quot;]</key>
                            <units>B</units>
                            <description>新生代最大容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Current old space capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;OC&quot;]</key>
                            <units>B</units>
                            <description>当前老生代容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Current old generation capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;OGC&quot;]</key>
                            <units>B</units>
                            <description>当前老年代容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Minimum old generation capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;OGCMN&quot;]</key>
                            <units>B</units>
                            <description>老年代最小容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Maximum old generation capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;OGCMX&quot;]</key>
                            <units>B</units>
                            <description>老年代最大容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Old space utilization {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;OU&quot;]</key>
                            <units>B</units>
                            <description>当前老生代使用量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Current survivor space 0 capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;S0C&quot;]</key>
                            <units>B</units>
                            <description>复活区S0容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Survivor space 0 utilization {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;S0U&quot;]</key>
                            <units>B</units>
                            <description>当前S0使用量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Current survivor space 1 capacity {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;S1C&quot;]</key>
                            <units>B</units>
                            <description>当前S1容量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Survivor space 1 utilization {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;S1U&quot;]</key>
                            <units>B</units>
                            <description>当前S1使用量</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Threads {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;Threads&quot;]</key>
                            <description>当前线程数</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Number of young generation GC events {#PROGRAM_NAME}  {#PID_NUMBER}</name>
                            <type>ZABBIX_ACTIVE</type>
                            <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;YGC&quot;]</key>
                            <description>年轻代GC次数</description>
                            <applications>
                                <application>
                                    <name>JVM</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>SIMPLE_CHANGE</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>new generation utilization {#PROGRAM_NAME} {#PID_NUMBER}</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>FF4000</color>
                                    <item>
                                        <host>Template App Generic Java Script</host>
                                        <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;NGC&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>FFBF00</color>
                                    <item>
                                        <host>Template App Generic Java Script</host>
                                        <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;EU&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Template App Generic Java Script</host>
                                        <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;S1U&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>4</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>A54F10</color>
                                    <item>
                                        <host>Template App Generic Java Script</host>
                                        <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;S0U&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>5</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>FF0000</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template App Generic Java Script</host>
                                        <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;YGC&quot;]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>old generation utilization {#PROGRAM_NAME} {#PID_NUMBER}</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>FF4000</color>
                                    <item>
                                        <host>Template App Generic Java Script</host>
                                        <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;OC&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>FFBF00</color>
                                    <item>
                                        <host>Template App Generic Java Script</host>
                                        <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;OU&quot;]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>FF0000</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Template App Generic Java Script</host>
                                        <key>java.status[&quot;{#PROGRAM_NAME}&quot;,&quot;{#PID_NUMBER}&quot;,&quot;FGC&quot;]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
            </discovery_rules>
            <screens>
                <screen>
                    <name>JVM Memory</name>
                    <hsize>1</hsize>
                    <vsize>2</vsize>
                    <screen_items>
                        <screen_item>
                            <resourcetype>20</resourcetype>
                            <style>0</style>
                            <resource>
                                <name>new generation utilization {#PROGRAM_NAME} {#PID_NUMBER}</name>
                                <host>Template App Generic Java Script</host>
                            </resource>
                            <width>500</width>
                            <height>100</height>
                            <x>0</x>
                            <y>0</y>
                            <colspan>1</colspan>
                            <rowspan>1</rowspan>
                            <elements>0</elements>
                            <valign>0</valign>
                            <halign>0</halign>
                            <dynamic>0</dynamic>
                            <sort_triggers>0</sort_triggers>
                            <url/>
                            <application/>
                            <max_columns>3</max_columns>
                        </screen_item>
                    </screen_items>
                </screen>
            </screens>
        </template>
    </templates>
</zabbix_export>
